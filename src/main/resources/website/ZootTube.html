<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Zoot Tube</title>
</head>
<body>

<a href="test.html">Test Page</a>

<div id="app">
    <button id="signInButton" onclick="">Sign in</button>
</div>

<button id="getPlaylists" onclick="getMyPlaylists()">Get My Playlists</button>
<div id="playlists">

</div>

<script src="scripts/index.js"></script>

<script>
    let socket = new WebSocket('ws://localhost:8080');
    socket.onmessage = (messageWrapper) => {
        let stringMessage = messageWrapper.data;
        let asJSONObject = JSON.parse(stringMessage);
        console.log(asJSONObject);

        if (asJSONObject.header.localeCompare("playlists") === 0) {
            let workspace = document.getElementById('playlists');
            let list = document.createElement('ul');
            asJSONObject.data.forEach((playlist) => {
                let item = document.createElement('li');
                item.innerText = playlist.snippet.title;
                list.appendChild(item);
            });
            workspace.appendChild(list);
        }
    };
    socket.onopen = () => {
        socket.send(`{"header": "test", "data":"test!"}`);
    };

    function getMyPlaylists() {
        socket.send(`{"header":"getMyPlaylists","data":""}`);
    }

</script>
</body>
</html>